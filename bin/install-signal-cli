#!/usr/bin/env bash

cd `dirname "$0"` # cd to script path

./check-env SIGNAL_CLI_VERSION $SIGNAL_CLI_VERSION || exit $?
./check-env RELAY_NUMBER $RELAY_NUMBER || exit $?

echo "--- installing signal-cli version ${version}"

wget https://github.com/AsamK/signal-cli/releases/download/v"${SIGNAL_CLI_VERSION}"/signal-cli-"${SIGNAL_CLI_VERSION}".tar.gz
sudo tar xf signal-cli-"${SIGNAL_CLI_VERSION}".tar.gz -C /opt
sudo ln -sf /opt/signal-cli-"${SIGNAL_CLI_VERSION}"/bin/signal-cli /usr/local/bin

echo "--- SUCCESS! installed signal-cli. cleaning up."

rm -rf signal-cli-"${SIGNAL_CLI_VERSION}".tar.gz
