#!/usr/bin/env bash

pushd `pwd` # store current dir
cd `dirname "$0"` # cd to script path

if [[ $1 == "-h" ]];then
  echo "this script releases phone numbers with sids listed in a text file. usage:"
  echo "./bin/release-numbers <path_to_phone_number_sids>"
  exit 1
fi

path_to_number_sids=$1

if [ -z $path_to_number_sids ];then
  echo "--- ERROR: no path to phone number sids text file provided";
  echo "--- USAGE: ./bin/release-number <phone_number_sid>";
  exit 1
fi

while read sid; do
  echo "--- releasing number with sid $sid ..."
  ./release-number $sid
done < $path_to_number_sids

popd # return to original dir
