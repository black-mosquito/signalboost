#!/usr/bin/env bash

pushd `pwd` # store current dir
cd `dirname "$0"` # cd to script path
cd ..


if [ -z $CHANNEL_PHONE_NUMBER ];then
  echo "--- ERROR: no CHANNEL_PHONE_NUMBER found. try \`\$ source .env\`"
  exit 1
fi

if [ -z $VERIFICATION_CODE ];then
  echo "--- ERROR: no VERIFICATION_CODE found. try \`\$ source .env\`"
  exit 1
fi


echo "--- verifying ${CHANNEL_PHONE_NUMBER}..."

signal-cli -u $CHANNEL_PHONE_NUMBER verify $VERIFICATION_CODE

echo "--- SUCCESS!"

popd # return to original dir
